this.JsonPollock=function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var n={};return t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="/dist/",t(t.s=5)}([function(e,t,n){var r,i,r,o;!function(e,n){"use strict";r=[],i=function(){return n(e,e,!0)}.apply(t,r)}("undefined"==typeof ChronosRoot?this:ChronosRoot,function(e,t,n){"use strict";function r(e,t,n){var r=[];if(e[t]&&e[t].length)for(var i=0;i<e[t].length;i++)n&&"*"!==e[t][i].appName&&e[t][i].appName!==n||r.push(e[t][i]);if(e["*"])for(var o=0;o<e["*"].length;o++)n&&"*"!==e["*"][o].appName&&e["*"][o].appName!==n||r.push(e["*"][o]);return r}function i(t,n,r){e&&"function"==typeof e.log&&e.log(t,n,r)}function o(e){var t,n=e.unbindObj[e.attrName],r=!1;if(!e.unbindObj)return i("CMD listen id not spec for unbind","ERROR",e.loggerName),null;if("string"==typeof e.unbindObj)return c(e.lstnrs,e.unbindObj);if(!e.unbindObj.func&&!e.unbindObj.context&&!e.unbindObj.appName)return!1;var o=e.lstnrs;n&&(o={},o[n]=e.lstnrs[n]);for(var a in o)o.hasOwnProperty(a)&&o[a]&&o[a].length&&(t=u(o[a],e.unbindObj.func,e.unbindObj.context,e.unbindObj.appName),t.length!==o[a].length&&(e.lstnrs[a]=t,r=!0));return r}function a(e){var t={};if(e.constructor===Object)for(var n in e)e.hasOwnProperty(n)&&null!==e[n]&&void 0!==e[n]&&("object"==typeof e[n]&&e[n].constructor!==Array?t[n]=a(e[n]):e[n].constructor===Array?t[n]=e[n].slice(0)||[]:"function"!=typeof e[n]&&(t[n]=null!==e[n]&&void 0!==e[n]?e[n]:""));else e.constructor===Array?t=e.slice(0)||[]:"function"!=typeof e&&(t=e);return t}function l(e,t,n){if((void 0===n||"*"===n)&&"*"===t)return e;for(var r=[],i=0;i<e.length;i++)e[i].eventName!==n&&"*"!==n||(t&&t===e[i].appName||!e[i].appName||"*"===e[i].appName||"*"===t)&&r.push(e[i]);return r}function s(e){if(0===e.eventBufferLimit||e.triggerData.data&&e.triggerData.data.doNotStore)e=null;else{var t={eventName:e.triggerData[e.attrName],appName:e.triggerData.appName};t.data=e.triggerData.passDataByRef?e.triggerData.data:a(e.triggerData.data),e.eventBufferLimit>0?(e.index>=e.eventBufferLimit&&(e.index=0),e.fired[e.index]=t,e.index++):e.fired.push(t),e=null}}function c(e,t){var n=!1;if(!t)return i("Ev listen id not spec for unregister","ERROR","Events"),null;for(var r in e)if(e.hasOwnProperty(r))for(var o=0;o<e[r].length;o++)if(e[r][o].id==t){e[r].splice(o,1),i("Ev listen="+t+" and name="+r+" unregister","DEBUG","Events"),n=!0;break}return n||i("Ev listen not found "+t+" unregister","DEBUG","Events"),n}function u(e,t,n,r){var o=[];if(e&&e.length)for(var a=0;a<e.length;a++)try{var l=!n&&e[a].func===t,s=!t&&n&&e[a].context===n,c=t&&n&&e[a].func===t&&e[a].context===n,u=r&&r===e[a].appName,f="*"===e[a].appName;if(l||s||c){if(u||f)continue;if(s)continue}else if(!t&&!n&&u)continue;o.push(e[a])}catch(e){i("Error in unbind e="+e.message,"ERROR","Events")}return o}var f={getListeners:r,log:i,unbind:o,hasFired:l,cloneEventData:a,storeEventData:s};return n||(t.EventsUtil=t.EventsUtil||f),f}),function(n,a){"use strict";r=[i],void 0!==(o=function(e){return a(n,n,e,!0)}.apply(t,r))&&(e.exports=o)}("undefined"==typeof ChronosRoot?this:ChronosRoot,function(e,t,n,r){"use strict";function i(e){function t(e){return e?(e.triggerOnce=!0,r(e)):null}function r(e,t,i){var o=e;if("string"==typeof e&&(o={appName:e,eventName:t,func:i}),o.appName=o.appName||f,"*"!==f&&("string"!=typeof e||"function"!=typeof t&&void 0!==t||(o.eventName=e)),!o.eventName||!o.func||"function"!=typeof o.func&&o.func.constructor!==Array)return n.log("Ev listen has invalid params: evName=["+o.eventName+"]","ERROR","Events"),null;if(o.func.constructor===Array){for(var a,l,s=[],c=0;c<o.func.length;c++)a=n.cloneEventData(o),a.func=o.func[c],l=r(a),s.push(l);return s}var u=y+v++,d={id:u,func:o.func,context:o.context||null,aSync:!!o.aSync,appName:o.appName,triggerOnce:o.triggerOnce||!1};return m[o.eventName]=m[o.eventName]||[],m[o.eventName].push(d),n.log("Ev listen rgstr: evName=["+o.eventName+"] aSync="+d.aSync+" appName="+d.name,"DEBUG","Events"),o=null,e=null,u}function i(e){return"*"!==f&&(e.appName=e.appName||f),n.unbind({unbindObj:e,attrName:p,loggerName:d,lstnrs:m})}function o(e,t){return void 0===t&&(t=e,e=f),n.hasFired(h,e,t)}function a(e,t,r){var i=e;if("string"==typeof e&&(i={eventName:t,appName:e,data:r}),"*"!==f&&(i.appName=i.appName||f,"string"!=typeof e||"object"!=typeof t&&void 0!==t||(i.eventName=e)),!i||void 0===i.eventName)return n.log("Ev name not spec for publish","ERROR","Events"),i=null,null;i.passDataByRef=i.passDataByRef||!c,s(i);var o=n.getListeners(m,i.eventName,i.appName);if(o.length>0)for(var a=0;a<o.length;a++){var u=i.passDataByRef?i.data:n.cloneEventData(i.data),d={appName:i.appName,eventName:i.eventName},p=o[a];p.aSync||u&&u.aSync?setTimeout(l(p,u,d),0):l(p,u,d)()}return i=null,o.length>0}function l(e,t,r){return function(){try{e.func.call(e.context,t,r),t=null,e.triggerOnce&&i(e),e=null}catch(t){n.log("Error executing "+r.eventName+" eventId: "+e.id+"e="+t.message,"ERROR","Events")}}}function s(e){n.storeEventData({triggerData:e,eventBufferLimit:u,attrName:p,fired:h,index:g})}var c,u,f,d="Events",p="eventName",v=0,m={},h=[],y="evId_",g=0;f=e&&e.appName||"*",c=!(!e||"boolean"!=typeof e.cloneEventData)&&e.cloneEventData,u=e&&!isNaN(e.eventBufferLimit)?e.eventBufferLimit:-1,this.once=t,this.hasFired=o,this.trigger=a,this.publish=a,this.bind=r,this.register=r,this.unbind=i,this.unregister=i}return r||(t.Events=t.Events||i),i})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=["vertical","horizontal","carousel"];t.default={styleToCss:function(e){var t="";return e&&(e.color&&(t+="color:"+e.color+";"),e["background-color"]&&(t+="background-color:"+e["background-color"]+";"),e.bold&&(t+="font-weight:bold;"),e.italic&&(t+="font-style:italic;"),e.size&&(t+="font-size:"+this.sizeToPx(e.size)+"px;")),t},splitBackgroundColorFromOtherStyles:function(e){var t=e,n=t.indexOf("background-color"),r="";return n>-1&&(r=t.substr(n,t.indexOf(";",n)-(n-1)),t=t.replace(r,"")),{backgroundColorStyle:r,style:t}},sizeToPx:function(e){switch(e){case"small":return 11;case"medium":return 13;case"large":return 17;default:return 13}},validateParameters:function(e){if(!e.type)throw new Error("Missing configuration: type");for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];n.forEach(function(t){if(void 0===e[t])throw new Error("Missing configuration: "+t+" is a mandatory for element of type "+e.type)})},isString:function(e){return e instanceof String||"string"==typeof e},isLayout:function(e){return r.indexOf(e)>=0},normalizeHtmlText:function(e){var t=e;return e&&(t=t.replace(/(?:\r\n|\r|\n)/g,"<br/>")),t},escapeHtml:function(e){var t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"};return e.replace(/[&<>"'`=\/]/g,function(e){return t[e]})},hasClass:function(e,t){return e.classList&&e.classList.contains?e.classList.contains(t):!!e.className.match(new RegExp("(\\s|^)"+t+"(\\s|$)"))},addClass:function(e,t){e.classList?e.classList.add(t):this.hasClass(e,t)||(e.className+=" "+t)},removeClass:function(e,t){if(e.classList)e.classList.remove(t);else if(this.hasClass(e,t)){var n=new RegExp("(\\s|^)"+t+"(\\s|$)");e.className=e.className.replace(n," ")}}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(4),c=r(s),u=n(1),f=r(u),d=n(0),p=function(e){function t(e,n){i(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.errors=n,r}return a(t,e),t}(Error),v=function(){function e(t){i(this,e),this.events=new d({cloneEventData:!0,appName:"json-pollock"}),this.provider=new c.default(this.events),this.maxAllowedElements=50,this.schemaValidator=t}return l(e,[{key:"init",value:function(e){e&&(Object.prototype.hasOwnProperty.call(e,"maxAllowedElements")&&(!isNaN(e.maxAllowedElements)&&e.maxAllowedElements>0?this.maxAllowedElements=e.maxAllowedElements:this.maxAllowedElements=50),"function"==typeof e.onAfterElementRendered&&(this.onAfterElementRendered=e.onAfterElementRendered))}},{key:"renderElement",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(!(r>=this.maxAllowedElements)){var i=r,o=this.provider.get(e.type),a=void 0;o&&(a=o(e),this.onAfterElementRendered&&(a=this.onAfterElementRendered(a,e)),a&&(t.appendChild(a),Array.isArray(e.elements)&&e.elements.forEach(function(e){i+=1,n.renderElement(e,a,i)}),a.afterRender&&a.afterRender.call(a)))}}},{key:"render",value:function(e){var t=void 0;if(t=f.default.isString(e)?JSON.parse(e):e,this.schemaValidator){var n=this.schemaValidator.validate(t);if(!n.valid)throw new p("Schema validation error, see 'errors' for more details",n.errors)}var r=document.createDocumentFragment(),i=document.createElement("div");return i.className="lp-json-pollock",f.default.isLayout(t.type)||(i.className+=" lp-json-pollock-single-element"),r.appendChild(i),this.renderElement(t,i),r}},{key:"registerAction",value:function(e,t){this.events.bind({eventName:e,func:function(e){t(e)}})}},{key:"unregisterAction",value:function(e){this.events.unbind({eventName:e})}},{key:"unregisterAllActions",value:function(){this.events.unbind({})}},{key:"registerElement",value:function(e,t){this.provider.set(e,t)}}]),e}();v.TEMPLATE_TYPES=c.default.TYPES,t.default=v},function(e,t){},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(1),a=function(e){return e&&e.__esModule?e:{default:e}}(o),l=(n(0),{TEXT:"text",BUTTON:"button",IMAGE:"image",MAP:"map",VERTICAL:"vertical",HORIZONTAL:"horizontal",CAROUSEL:"carousel"}),s=function(){function e(t){var n=this;r(this,e),this.elements={},this.events=t,this.set(l.TEXT,function(e){var t=document.createElement("div"),n=e.tooltip?a.default.escapeHtml(e.tooltip):"";t.className="lp-json-pollock-element-text",e.rtl&&(t.dir="rtl",a.default.addClass(t,"direction-rtl"));var r=a.default.styleToCss(e.style),i=a.default.splitBackgroundColorFromOtherStyles(r);return t.setAttribute("style",i.backgroundColorStyle),t.innerHTML='<span style="'+i.style+'" title="'+n+'" aria-label="'+n+'">'+a.default.normalizeHtmlText(e.text)+"</span>",t}),this.set(l.BUTTON,function(e){var t=document.createElement("div");t.className="lp-json-pollock-element-button",e.rtl&&(t.dir="rtl",a.default.addClass(t,"direction-rtl"));var r=document.createElement("button");if(r.innerHTML=a.default.normalizeHtmlText(e.title),e.tooltip&&(r.title=e.tooltip,r.setAttribute("aria-label",e.tooltip)),e.style){var i=a.default.styleToCss(e.style),o=a.default.splitBackgroundColorFromOtherStyles(i);t.setAttribute("style",o.backgroundColorStyle),r.style.cssText=o.style}return e.click&&e.click.actions&&(r.onclick=n.wrapAction(e.click)),t.appendChild(r),t}),this.set(l.IMAGE,function(e){var t=document.createElement("div");t.className="lp-json-pollock-element-image loading",e.rtl&&(t.dir="rtl",a.default.addClass(t,"direction-rtl"));var r=document.createElement("img");return r.src=e.url,e.tooltip&&(r.title=e.tooltip,r.setAttribute("aria-label",e.tooltip)),e.style&&(r.style.cssText=a.default.styleToCss(e.style)),e.caption&&(t.innerHTML+="<span>"+e.caption+"</span>"),r.onload=function(){a.default.removeClass(t,"loading")},r.onerror=function(){a.default.removeClass(t,"loading"),a.default.addClass(t,"error"),t.title="fail to load image",r.style.display="none"},e.click&&e.click.actions&&(r.onclick=n.wrapAction(e.click)),t.appendChild(r),t}),this.set(l.MAP,function(e){var t=document.createElement("div");return t.className="lp-json-pollock-element-map",e.tooltip&&(t.title=e.tooltip,t.setAttribute("aria-label",e.tooltip)),e.style&&(t.style.cssText=a.default.styleToCss(e.style)),e.click&&e.click.actions?t.onclick=n.wrapAction(e.click):t.onclick=function(){window.open("https://www.google.com/maps/search/?api=1&query="+e.la+","+e.lo,"_blank")},t}),this.set(l.VERTICAL,function(){var e=document.createElement("div");return e.className="lp-json-pollock-layout lp-json-pollock-layout-vertical",e}),this.set(l.CAROUSEL,function(e){function t(e){f=0,0===u&&this.events.trigger({eventName:h,data:{offset:u,prevOffset:f,uiEvent:e}}),""!==m.style.left&&(f=parseInt(m.style.left,s)),u=f-l-a-c,p.style.visibility="visible",d.style.visibility="visible",v.offsetWidth>m.offsetWidth+u&&(u=-(m.offsetWidth+a-v.offsetWidth),d.style.visibility="hidden"),m.style.left=u+"px"}function r(e){f=0,""!==m.style.left&&(f=parseInt(m.style.left,s)),u=f+l+a+c,d.style.visibility="visible",u>=0&&(u=0,p.style.visibility="hidden",d.style.visibility="visible"),0===u&&this.events.trigger({eventName:h,data:{offset:u,prevOffset:f,uiEvent:e}}),m.style.left=u+"px"}function i(e){return e.className.indexOf("lp-json-pollock-layout")>-1?e:i(e.parentNode)}function o(e){var n=e.target,o=i(n);v.scrollLeft=0;var a=v.getBoundingClientRect(),l=o.getBoundingClientRect();a.left>l.left?r.call(this,e):a.right<l.right&&t.call(this,e)}var a=e.padding||0,l=180,s=10,c=2,u=0,f=0,d=document.createElement("div"),p=document.createElement("div"),v=document.createElement("div"),m=document.createElement("div"),h="carouselOffsetChange";return v.afterRender=function(){if(v.childNodes.length){for(var e=0;e<v.childNodes.length;e+=1){var i=v.childNodes[e];i.addEventListener("focus",o.bind(n),!0),i.style.margin="0 "+a/2+"px"}for(d.className="lp-json-pollock-component-action lp-json-pollock-layout-carousel-arrow",p.className="lp-json-pollock-component-action lp-json-pollock-layout-carousel-arrow left";v.hasChildNodes();)m.insertBefore(v.lastChild,m.firstChild);v.appendChild(m);var s=0,u=2*(l+c)+a;m.childNodes.length>2&&(s=(m.childNodes.length-2)*(c+l+a));var f=u+s;m.style.width=f+"px",m.className="lp-json-pollock-layout-carousel",v.className="lp-json-pollock-layout-carousel-wrapper",v.appendChild(m),v.appendChild(d),v.appendChild(p),setTimeout(function(){v.offsetWidth>m.offsetWidth&&(p.style.visibility="hidden",d.style.visibility="hidden")},0),d.onclick=function(e){t.call(n,e)},p.onclick=function(e){r.call(n,e)}}},v}),this.set(l.HORIZONTAL,function(){var e=document.createElement("div");return e.className="lp-json-pollock-layout lp-json-pollock-layout-horizontal",e.afterRender=function(){if(e.childNodes.length){var t=100/e.childNodes.length;Array.prototype.forEach.call(e.childNodes,function(e){e.style.width=t+"%"})}},e})}return i(e,[{key:"get",value:function(e){return this.elements[e]}},{key:"set",value:function(e,t){this.elements[e]=t}},{key:"wrapAction",value:function(e){var t=this;return function(n){e.actions instanceof Array&&e.actions.forEach(function(r){t.events.trigger({eventName:r.type,data:{actionData:r,metadata:e.metadata,uiEvent:n}})})}}}]),e}();s.TYPES=l,t.default=s},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.TEMPLATE_TYPES=t.version=t.unregisterAllActions=t.unregisterAction=t.registerAction=t.render=t.init=void 0;var i=n(3),o=(r(i),n(2)),a=r(o),l=new a.default,s=l.init.bind(l),c=l.render.bind(l),u=l.registerAction.bind(l),f=l.unregisterAction.bind(l),d=l.unregisterAllActions.bind(l),p=a.default.TEMPLATE_TYPES;t.init=s,t.render=c,t.registerAction=u,t.unregisterAction=f,t.unregisterAllActions=d,t.version="1.2.0",t.TEMPLATE_TYPES=p}]);