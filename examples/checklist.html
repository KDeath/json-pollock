<!doctype html>

<html lang="en">

<head>
  <meta charset="utf-8">

  <title>SC Test</title>
      <link rel="stylesheet" href="/dist/json-pollock.min.css">
    <script src="/dist/json-pollock.js"></script>
    <script>
      window.onload = function () {

      var example = {
        "type": "list",
        "elements": [
          {
            "type": "text",
            "text": "The checklist"
          },
          {
            "type": "sections",
            "elements": [
              {
                "type": "section",
                "sectionID": "123",
                "elements": [
                  {
                    "type": "checklist",
                    "elements": [
                      {
                        "type": "checkbox",
                        "text": "product name (Title) this is a random text this is a random text",
                        "tooltip": "text tooltip",
                        "borderLine": true,
                        "click": {
                          "metadata": [
                            {
                              "type": "ExternalId",
                              "id": "ANOTHER_ONE_35"
                            },
                            {
                              "type": "ActionReason",
                              "reason": "escalated_by_bot",
                              "reasonId": 3
                            }
                          ],
                          "actions": [
                            {
                              "type": "checked",
                              "publishText": "Two year plan leasing a mobile1"
                            }
                          ]
                        }
                      },
                      {
                        "type": "checkbox",
                        "text": "product name (Title)",
                        "tooltip": "image tooltip",
                        "borderLine": true,
                        "click": {
                          "metadata": [
                            {
                              "type": "ExternalId",
                              "id": "ANOTHER_ONE_32"
                            }
                          ],
                          "actions": [
                            {
                              "type": "checked",
                              "publishText": "Two year plan leasing a mobile12"
                            }
                          ]
                        }
                      },
                      {
                        "type": "checkbox",
                        "text": "product name (Title)  this is a random text this is a random text this is a random text",
                        "tooltip": "image tooltip",
                        "borderLine": true,
                        "click": {
                          "metadata": [
                            {
                              "type": "ExternalId",
                              "id": "ANOTHER_ONE_33"
                            }
                          ],
                          "actions": [
                            {
                              "type": "checked",
                              "publishText": "Two year plan leasing a mobile123"
                            }
                          ]
                        }
                      }
                    ]
                  }
                ]
              }
            ]
          },
          {
            "type": "buttonlist",
            "elements": [
              {
                "type": "submitButton",
                "title": "click me!",
                "disabled": true,
                "click": {
                  "metadata": [
                    {
                      "type": "ExternalId",
                      "id": "ANOTHER_ONE_2"
                    }
                  ],
                  "actions": [
                    {
                      "type": "submitAsText",
                      "submit": true
                    }
                  ]
                }
              },
              {
                "type": "button",
                "tooltip": "Choose a plan",
                "title": "Choose a plan",
                "click": {
                  "metadata": [
                    {
                      "type": "ExternalId",
                      "id": "ANOTHER_ONE_1"
                    }
                  ],
                  "actions": [
                    {
                      "type": "publishText",
                      "text": "SIM only plan"
                    }
                  ]
                }
              }
            ]
          }
        ]
      };

      JsonPollock.registerAction('navigate', function (data) {
        alert(JSON.stringify(data));
      });

      JsonPollock.registerAction('link', function (data) {
        alert(JSON.stringify(data));
      });

      JsonPollock.registerAction('publishText', function (data) {
        alert(JSON.stringify(data));
      });

      JsonPollock.registerAction('checked', function (data) {
        console.log(data);
        let tmp = data.formPtr.querySelector('input[type=submit]');
        if(!this.datalol) {
          this.datalol = "";
        }
        this.datalol += data;
        tmp.disabled = !(!!this.datalol);
        console.log(this.datalol);
      }.bind(this));

      JsonPollock.registerAction('submitAsText', function (data) {
        console.log(data);
        console.log(this);
      });

      var el = JsonPollock.render(JSON.stringify(example));
      document.getElementById('content').appendChild(el);
    }
  </script>
</head>

<body>
  <div id='content'>
  </div>

</body>

</html>
